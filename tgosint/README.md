# tgosint

Проект для парсинга постов открытых телеграмм каналов и поиска целей атак школьников.

## Основная идея
 1. Сделать выбоку интересующих каналов (можно парсить каналы, в которые вступили*) * - см раздел Ограничения
 2. Ежедневно парсить эти каналы
 3. Поиск интересующей нас информации (пока подразумевается ip|domain, можно добавлять любые критерии)
 4. Создание закрытого телеграм/рокет канала и отправка интересной инфы туда со ссылкой на источник

## Что сделано
 Готовы все пункты, однако пункты 1 и 3 нужно постоянно обнавлять и следить за актуальностью.

## Ограничения
 1. Для парсинга нужен валидный аккаунт с привязанным телефоном.
 2. Парсинг закрытых каналов невозможен(если аккаунт не состоит в канале).


## Что нужно сделать
 - Список проверяемых тг каналов
 - Список искомой информации
 - Склонировать необходимые гитхаб репозитории
 - Список путей до гитхаб репозиториев (на данный момент реализована поддержка только конкретного [репозитория](https://github.com/alexnest-ua/targets))

## Текущее состояние

На данный момент можно парсить каналы из списка tg_links и git_repos. При первом запуске скрипт парсит всю историю и сохраняет ее в папке data. Для того, чтобы парсить только актуальные посты создается message_offset для каждого канала - id сообщения, с которого надо парсить. Формат вывода - csv или json. В планах реализовать поиск по истории. Скрипт возвращает все сообщения, которые нашел в каналах в двух вариантах: в рокет и в телеграм. Для рокета нужен хук к каналу, для телеграма: api_id и api_hash [вот тут](https://core.telegram.org/api/obtaining_api_id) можно почитать, юзернейм, токен бота и канал, куда бот будет слать находки. Первый запуск для телеги требует аутентификации пользователя. Дальше создастся файлик username.session, где будет лежать активная сессия.

Парсинг каналов телеграм происходит с помощью  


## Как запустить

1. `git clone ...`
2. `python3 -m venv tgo`
3. `source <venv>/bin/activate (.\\tgo\\Scripts\\Activate.ps1)`
4. `cd tgosint`
5. `pip install -r requirements.txt`
6. `python tgosint.py`